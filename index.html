<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Sling Billing Software App</title>

  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/png" href="fav.png">
  <!-- Poppins font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&amp;display=swap" rel="stylesheet">
  <!-- Font Awesome (latest) -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <script>
    (function () {
      try {
        // Only apply custom favicon if not on login page
        if (window.location.pathname === '/login' || window.location.pathname === '/') {
          // Ensure default favicon on login page
          var defaultLink = document.querySelector("link[rel~='icon']");
          if (defaultLink && defaultLink.href && !defaultLink.href.endsWith('fav.png')) {
            defaultLink.href = 'fav.png';
          }
          return;
        }

        var raw = sessionStorage.getItem('auth_user');
        var token = sessionStorage.getItem('auth_token');

        // Only apply custom settings if user data exists AND user is actually authenticated
        if (!raw || !token) {
          // Reset to default if no valid auth
          var defaultLink = document.querySelector("link[rel~='icon']");
          if (defaultLink) {
            defaultLink.href = 'fav.png';
          }
          document.title = 'Sling Billing Software App';
          return;
        }

        var u = JSON.parse(raw);
        var candidates = [u && u.app_title, u && u.appName, u && u.company_name, u && u.company, u && u.business_name, u && u.org_name, u && u.name, u && u.title, u && u.slug_name].filter(Boolean);
        if (candidates.length) document.title = candidates[0];
        var icon = u && (u.fav_icon || u.favicon || u.favIcon || u.icon || u.logo || u.logo_url || u.fav_icon_url);
        if (icon) {
          try {
            var href = icon;
            if (!/^https?:\/\//i.test(icon)) {
              var base = (window.__env && window.__env.assetsBase) || '';
              base = base.replace(/\/$/, '');
              href = base ? base + '/' + icon.replace(/^\//, '') : icon;
            }
            var link = document.querySelector("link[rel~='icon']") || document.createElement('link');
            link.rel = 'icon';
            link.href = href;
            if (!document.querySelector("link[rel~='icon']")) document.getElementsByTagName('head')[0].appendChild(link);
          } catch (e) { }
        }
      } catch (e) { }
    })();
  </script>
<link rel="stylesheet" href="styles.css"></head>

<body>
  <app-root></app-root>
<link rel="modulepreload" href="chunk-23BXOP6M.js"><link rel="modulepreload" href="chunk-RP5NUORX.js"><link rel="modulepreload" href="chunk-BZSMQWJC.js"><script src="polyfills.js" type="module"></script><script src="main.js" type="module"></script></body>

</html>